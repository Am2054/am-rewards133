<!DOCTYPE html>    <html lang="ar" dir="rtl">      
<head>          
  <meta charset="UTF-8" />        
  <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Am Rewards</title>        
  <meta name="viewport" content="width=device-width, initial-scale=1" />        
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">        
  <style>        
    :root{          
      --main-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 60%, #38bdf8 100%);          
      --dark-box-bg: rgba(2,6,23,0.95);  
      --glass-bg: rgba(255,255,255,0.13);          
      --glass-border: rgba(56,189,248,0.18);          
      --input-bg: rgba(30,41,59,0.9);  
      --input-focus: #38bdf8;          
      --input-border: #334155;          
      --error: #f87171;          
      --success: #22c55e;          
      --muted: #a5f3fc;          
      --radius: 28px;          
      --shadow: 0 8px 32px 0 rgba(2,6,23,0.4);  
      --gold: #FFD369;          
      --gold-dark: #bfa243;          
    }          
    *{box-sizing:border-box}        
    html, body {          
      height: 100%;          
      margin: 0;          
      padding: 0;          
      font-family: "Cairo", "Montserrat", sans-serif;          
      color: #f1f6fb;          
      direction: rtl;          
      background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.9)),   
                  var(--main-gradient),   
                  url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80');          
      background-size: cover;          
      background-attachment: fixed;          
      background-blend-mode: overlay;          
      overflow-y: auto !important;          
      scroll-behavior: smooth;  
    }          
    body {          
      min-height: 100vh;          
      display: block;          
    }          
    .bg-glass {          
      position: fixed; inset: 0; z-index: 0; pointer-events: none;          
      background: radial-gradient(circle at 65% 17%, rgba(56,189,248,0.05) 0%, transparent 90%),   
                  radial-gradient(circle at 25% 80%, rgba(34,197,94,0.06) 0%, transparent 80%);          
      filter: blur(28px) saturate(1.1);          
      animation: floatGlass 16s ease-in-out infinite alternate;          
    }          
    @keyframes floatGlass {          
      0% { background-position: 65% 17%, 25% 80%;}          
      100% { background-position: 55% 27%, 20% 95%;}          
    }          
    .center-box {          
      width: 100%; max-width: 420px; margin: 56px auto 56px auto;          
      padding: 38px 18px 30px 18px; border-radius: var(--radius);          
      background: var(--dark-box-bg); box-shadow: var(--shadow), 0 0 10px #0008;          
      border: 2px solid var(--glass-border); z-index: 2; position: relative;          
      display: flex; flex-direction: column; align-items: center;          
    }          
    h2 {          
      margin-bottom: 20px; font-family: "Montserrat", "Cairo", sans-serif; font-size: 1.7rem;          
      font-weight: 900; letter-spacing: 1.1px; text-shadow: 0 0 10px #38bdf8a2; color: #38bdf8;          
    }          
    .subtitle { color: var(--muted); font-size: 1rem; margin-bottom: 19px; font-weight: 700; text-shadow: 0 0 4px #38bdf8a1; letter-spacing: 0.5px; }          
    .gold-name {          
      display: block; background: var(--gold); color: var(--gold-dark);          
      padding: 10px 17px 8px 17px; min-width: 120px; border-radius: 12px; font-size: 1.08rem;          
      font-family: "Montserrat","Cairo",sans-serif; font-weight: 900; margin: 0 auto 18px auto;          
      text-align: center; box-shadow: 0 4px 10px #FFD36944, 0 2px 8px #0002; border: 2px solid #bfa24333;          
    }          
    .form-row { margin-bottom: 18px; text-align: right; position: relative; width: 100%; }      
    label { font-size: 1.08rem; color: var(--muted); margin-bottom: 6px; display: block; font-weight: 700; }    
    input {    
      width: 100%; padding: 16px 17px; border-radius: 15px; border: 2px solid var(--input-border);    
      background: var(--input-bg); color: #fff; font-size: 1.11rem; font-family: "Cairo",sans-serif;    
      transition: .18s; outline: none; font-weight: 600; box-sizing: border-box;    
    }    
    input[type="password"], input[type="text"] { padding-inline-start: 50px; } /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø¹ÙŠÙ† */
    input:focus { border-color: var(--input-focus); box-shadow: 0 0 12px #38bdf8a6; background: #1e293b; }    
    
    .password-eye {    
      position: absolute; inset-inline-start: 14px; top: 50%; transform: translateY(-10%); /* ØªØ­Ø³ÙŠÙ† Ù…ÙƒØ§Ù† Ø§Ù„Ø¹ÙŠÙ† */
      background: none; border: none; cursor: pointer; color: #38bdf8; opacity: 0.82; z-index: 3;    
      display: flex; align-items: center; justify-content: center; outline: none;    
    }    
    .password-eye svg { width: 23px; height: 23px; }    
    
    button.login-btn {    
      width: 100%; padding: 14px 0; border-radius: 15px; font-size: 1.07rem; font-weight: 900;    
      cursor: pointer; border: 2px solid #bfa24366; transition: .17s; margin-bottom: 14px;    
      background: linear-gradient(90deg,#FFD369 0%,#bfa243 100%); color: #2e2300;    
    }    
    button.login-btn:hover { background: linear-gradient(90deg,#bfa243 0%,#FFD369 100%); color: #fff; }    
    
    .message {  
      width: 100%; min-height: 36px; padding: 12px 5px; margin-bottom: 13px; border-radius: 11px;  
      font-size: 1.05rem; font-weight: bold; background: #fff; color: #2e2300; border: 2px solid #FFD369;  
      text-align: center; display: none;  
    }  
    .footer { margin-top: 16px; font-size: .99rem; color: #94a3b8; font-weight: 500; }  
  </style>          
</head>        
<body>        
  <div class="bg-glass" aria-hidden="true"></div>        
  <div class="center-box">        
    <h2>Am Rewards</h2>        
    <div class="subtitle">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø¬Ù…Ø¹ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</div>        
    <span class="gold-name">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>        
    <div id="msg" class="message"><span id="msg-text"></span></div>    
    <form id="login-form" style="width:100%">        
      <div class="form-row">        
        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>        
        <input type="email" id="login-email" required />        
      </div>        
      <div class="form-row">        
        <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>        
        <input type="password" id="login-password" required />        
        <button type="button" class="password-eye" id="password-toggle-btn">        
          <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          <svg class="eye-closed" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22"/></svg>
        </button>        
      </div>        
      <button class="login-btn" id="login-btn" type="submit">Ø¯Ø®ÙˆÙ„ ğŸš€</button>        
    </form>      
    <a href="signup.html" style="color:var(--muted); font-weight:700; text-decoration:none; margin-top:10px;">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø£Ù†Ø´Ø¦ ÙˆØ§Ø­Ø¯Ø§Ù‹</a>    
    <div class="footer">Â© 2026 Am Rewards</div>      
  </div>      

  <script type="module">        
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";        
    import { getAuth, signInWithEmailAndPassword, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";        
    import { getFirestore, doc, getDoc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = { apiKey: "AIzaSyBfOJPkWbmcJ6s29bDNysr-H0Kx-Js3Gy0", authDomain: "am--rewards.firebaseapp.com", projectId: "am--rewards" };        
    const app = initializeApp(firebaseConfig);        
    const auth = getAuth(app);        
    const db = getFirestore(app);        

    const loginForm = document.getElementById("login-form");   
    const msgEl = document.getElementById("msg");  
    const msgTextEl = document.getElementById("msg-text");  
    const loginBtn = document.getElementById("login-btn");  

    function showMessage(text, type="success") {  
      msgTextEl.textContent = text; msgEl.className = "message " + type;  
      msgEl.style.display = "block";  
      if (type === "success") setTimeout(() => msgEl.style.display = "none", 3000);  
    }

    loginForm.addEventListener("submit", async (e) => {  
      e.preventDefault();  
      loginBtn.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚..."; loginBtn.disabled = true;  

      try {  
        await setPersistence(auth, browserLocalPersistence);  
        const userCredential = await signInWithEmailAndPassword(auth, document.getElementById("login-email").value, document.getElementById("login-password").value);  
        const user = userCredential.user;

        // ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø± Ø¸Ù‡ÙˆØ±
        await setDoc(doc(db, "users", user.uid), { lastLogin: serverTimestamp() }, { merge: true });

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø£Ø¯Ù…Ù† Ø¨Ø§Ù„Ù€ UID (Ø§Ù„Ø£ÙƒØ«Ø± Ø£Ù…Ø§Ù†Ø§Ù‹)
        const adminSnap = await getDoc(doc(db, "admins", user.uid));  
        
        if (adminSnap.exists() && adminSnap.data().active === true) {  
          showMessage("Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ Ø£ÙŠÙ‡Ø§ Ø§Ù„Ù…Ø¯ÙŠØ± ğŸ›¡ï¸", "success");  
          setTimeout(() => window.location.href = "admin.html", 1000);  
        } else {  
          showMessage("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ âœ…", "success");  
          setTimeout(() => window.location.href = "dashboard.html", 1000);  
        }  
      } catch (err) {  
        loginBtn.textContent = "Ø¯Ø®ÙˆÙ„ ğŸš€"; loginBtn.disabled = false;  
        showMessage("Ø®Ø·Ø£: ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ Ø§Ù„Ø§ØªØµØ§Ù„", "error");  
      }  
    });  

    document.getElementById("password-toggle-btn").addEventListener("click", function() {
      const passInput = document.getElementById("login-password");
      const type = passInput.type === "password" ? "text" : "password";
      passInput.type = type;
      this.querySelector(".eye-open").style.display = type === "password" ? "block" : "none";
      this.querySelector(".eye-closed").style.display = type === "password" ? "none" : "block";
    });
  </script>    
</body>  
</html>
