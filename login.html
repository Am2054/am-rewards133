<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Am Rewards</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}

body{
  margin:0;
  font-family:"Cairo",sans-serif;
  min-height:100vh;
  background:#020617;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#f8fafc;
}

.center-box{
  width:100%;
  max-width:420px;
  background:#020617;
  border:2px solid rgba(56,189,248,.25);
  border-radius:24px;
  padding:35px 25px;
  text-align:center;
}

h2{
  color:#38bdf8;
  margin-bottom:5px;
}

.gold-name{
  background:#FFD369;
  color:#3b2f00;
  padding:10px 20px;
  border-radius:12px;
  font-weight:900;
  margin-bottom:25px;
  display:inline-block;
}

.form-row{
  text-align:right;
  margin-bottom:18px;
}

label{
  display:block;
  margin-bottom:6px;
  font-weight:700;
  color:#cbd5f5;
}

.input-group{
  position:relative;
}

input{
  width:100%;
  padding:14px 45px 14px 14px;
  border-radius:14px;
  border:2px solid #334155;
  background:#020617;
  color:#fff;
  font-size:1rem;
  outline:none;
}

.password-toggle{
  position:absolute;
  left:12px;
  top:50%;
  transform:translateY(-50%);
  background:none;
  border:none;
  cursor:pointer;
  font-size:1.1rem;
  color:#38bdf8;
}

.login-btn{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  font-size:1.1rem;
  font-weight:900;
  cursor:pointer;
  background:linear-gradient(90deg,#FFD369,#bfa243);
  color:#2e2300;
}

.login-btn:disabled{
  opacity:.6;
  cursor:not-allowed;
}

.spinner{
  width:18px;
  height:18px;
  border:3px solid rgba(255,255,255,.3);
  border-top-color:#fff;
  border-radius:50%;
  display:inline-block;
  animation:spin .8s linear infinite;
}

@keyframes spin{to{transform:rotate(360deg)}}

.message{
  display:none;
  padding:12px;
  border-radius:10px;
  font-weight:700;
  margin-bottom:15px;
}

.message.error{background:#ffeaea;color:#b00000}
.message.success{background:#e7ffea;color:#047857}

.register-link{
  margin-top:18px;
  font-size:.95rem;
  color:#cbd5f5;
}

.register-link a{
  color:#38bdf8;
  font-weight:800;
  text-decoration:none;
  margin-right:6px;
}

.register-link a:hover{text-decoration:underline}
</style>
</head>

<body>

<div class="center-box">
  <h2>Am Rewards</h2>
  <div class="gold-name">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>

  <div id="msg" class="message"></div>

  <form id="login-form">
    <div class="form-row">
      <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
      <input type="email" id="login-email" required />
    </div>

    <div class="form-row">
      <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
      <div class="input-group">
        <input type="password" id="login-password" required />
        <button type="button" class="password-toggle" id="toggle">ğŸ‘</button>
      </div>
    </div>

    <button type="submit" class="login-btn" id="btn-login">
      ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    </button>
  </form>

  <div class="register-link">
    Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ
    <a href="signup.html">Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨</a>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBfOJPkWbmcJ6s29bDNysr-H0Kx-Js3Gy0",
  authDomain: "am--rewards.firebaseapp.com",
  projectId: "am--rewards"
};

initializeApp(firebaseConfig);
const auth = getAuth();

const msg = document.getElementById("msg");
const btn = document.getElementById("btn-login");
const pass = document.getElementById("login-password");

let attempts = 0;
let lockUntil = null;

document.getElementById("toggle").onclick = () => {
  pass.type = pass.type === "password" ? "text" : "password";
};

document.getElementById("login-form").onsubmit = async (e)=>{
  e.preventDefault();

  if(lockUntil && Date.now() < lockUntil){
    msg.textContent = "â³ ØªÙ… ØªØ¹Ø·ÙŠÙ„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù…Ø¯Ø© 10 Ø¯Ù‚Ø§Ø¦Ù‚";
    msg.className = "message error";
    msg.style.display="block";
    return;
  }

  btn.disabled=true;
  btn.innerHTML='<span class="spinner"></span>';

  try{
    const email = document.getElementById("login-email").value.trim();
    const password = pass.value;

    await signInWithEmailAndPassword(auth,email,password);

    msg.textContent="âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­";
    msg.className="message success";
    msg.style.display="block";

    setTimeout(()=>{
      btn.disabled=false;
      btn.innerHTML="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
      location.href="dashboard.html";
    },1000);

  }catch{
    attempts++;

    if(attempts>=5){
      lockUntil = Date.now() + 10*60*1000;
      msg.textContent="ğŸš« ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø± 10 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©";
      btn.disabled=true;
    }else{
      msg.textContent=`âš ï¸ Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø© (${attempts}/5)`;
      btn.disabled=false;
    }

    msg.className="message error";
    msg.style.display="block";
    btn.innerHTML="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
  }
};
</script>

</body>
  </html>
