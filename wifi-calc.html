<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ÙƒØ§Ø´Ù Ø§Ù„Ø¨Ø§Ù‚Ø© | Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¬Ø§Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f2ff;
            --accent: #7000ff;
            --success: #10b981;
            --danger: #ff4444;
            --warning: #facc15;
            --bg-glass: rgba(10, 15, 28, 0.96);
        }

        body {
            font-family: 'Tajawal', sans-serif; margin: 0; color: white;
            background: radial-gradient(circle at top, #1e1b4b 0%, #020617 100%);
            min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 20px 0;
        }

        .app-container { width: 95%; max-width: 480px; }

        .card {
            background: var(--bg-glass);
            border: 1px solid rgba(0, 242, 255, 0.15);
            border-radius: 30px; padding: 25px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø°Ø§ÙƒØ±Ø© */
        #memory-alert {
            display: none; background: rgba(112, 0, 255, 0.2);
            border: 1px solid var(--accent); border-radius: 15px;
            padding: 12px; margin-bottom: 20px; font-size: 13px; text-align: center;
            animation: slideDown 0.5s ease;
        }

        .logo-area { text-align: center; margin-bottom: 20px; }
        .logo-area h1 { font-size: 24px; color: var(--primary); margin: 0; }
        
        .section-title { font-size: 14px; font-weight: 700; margin: 20px 0 12px; color: var(--primary); border-right: 3px solid var(--accent); padding-right: 10px; }

        .input-field {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px; padding: 12px; margin-bottom: 12px; display: flex;
        }

        input, select { flex: 1; background: none; border: none; color: white; font-family: 'Tajawal'; outline: none; }

        .check-item {
            background: rgba(255,255,255,0.03); padding: 10px; border-radius: 10px;
            display: flex; align-items: center; cursor: pointer; margin-bottom: 8px; font-size: 12px;
        }

        .device-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .device-item {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px; padding: 10px; display: flex; justify-content: space-between; align-items: center;
        }
        .device-item input { width: 35px; text-align: center; color: var(--primary); font-weight: bold; }

        .btn-main {
            width: 100%; padding: 16px; border-radius: 15px; border: none;
            background: linear-gradient(45deg, var(--accent), var(--primary));
            color: white; font-weight: 900; cursor: pointer; margin-top: 15px;
        }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø­ÙƒÙ… */
        .verdict-panel {
            display: none; margin-top: 25px; padding: 20px; border-radius: 20px;
            background: rgba(0,0,0,0.4); border: 1px solid var(--primary);
        }

        .confidence-tag {
            display: inline-block; font-size: 10px; background: rgba(0,242,255,0.1);
            padding: 4px 10px; border-radius: 20px; color: var(--primary); margin-top: 5px;
        }

        .prediction-box {
            margin-top: 15px; padding: 12px; background: rgba(255, 68, 68, 0.1);
            border-radius: 12px; font-size: 13px; border-right: 3px solid var(--danger);
        }

        .btn-retention {
            width: 100%; padding: 12px; border-radius: 12px; border: 1px solid var(--warning);
            background: transparent; color: var(--warning); font-weight: 700; margin-top: 15px; cursor: pointer;
        }

        @keyframes slideDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

<div class="app-container">
    <div id="memory-alert"></div>

    <div class="card">
        <div class="logo-area">
            <h1>ÙƒØ§Ø´Ù Ø¸Ù„Ù… Ø§Ù„Ø¨Ø§Ù‚Ø© ğŸ•µï¸â€â™‚ï¸</h1>
            <p>Ø­Ù„Ù„ "Ù†Ø²Ø§Ù‡Ø©" Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙƒ Ø§Ù„Ø´Ø®ØµÙŠ</p>
        </div>

        <div class="section-title">ÙØ­Øµ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠ ğŸ”</div>
        <div id="checks">
            <label class="check-item"><input type="checkbox" id="c1"> Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨ØªØ®Ù„Øµ ÙØ¬Ø£Ø© Ù‚Ø¨Ù„ Ù…ÙŠØ¹Ø§Ø¯Ù‡Ø§</label>
            <label class="check-item"><input type="checkbox" id="c2"> Ø­Ø§Ø³Ø³ Ø¨Ù€ "Ø³Ø­Ø¨ ÙˆÙ‡Ù…ÙŠ" ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ…</label>
        </div>

        <div class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø§Ù‚Ø© ğŸ“¦</div>
        <div class="input-field">
            <select id="quota">
                <option value="140">Ø¨Ø§Ù‚Ø© 140 Ø¬ÙŠØ¬Ø§</option>
                <option value="200">200 Ø¬ÙŠØ¬Ø§</option>
                <option value="250">250 Ø¬ÙŠØ¬Ø§</option>
                <option value="600">600 Ø¬ÙŠØ¬Ø§</option>
            </select>
        </div>

        <div class="device-grid">
            <div class="device-item"><label>ğŸ“± Ù…ÙˆØ¨Ø§ÙŠÙ„</label><input type="number" id="mobs" value="3"></div>
            <div class="device-item"><label>ğŸ“º Ø´Ø§Ø´Ø©</label><input type="number" id="tvs" value="1"></div>
        </div>

        <button class="btn-main" onclick="diagnose()">Ø¥ØµØ¯Ø§Ø± ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ´Ø®ÙŠØµ âš¡</button>

        <div id="verdict" class="verdict-panel">
            <div style="text-align: center;">
                <span id="statusText" style="font-size: 20px; font-weight: 900; display: block;"></span>
                <span id="confidence" class="confidence-tag"></span>
            </div>
            
            <p id="reportTxt" style="font-size: 13px; color: #cbd5e1; margin-top: 15px;"></p>

            <div id="prediction" class="prediction-box"></div>

            <button class="btn-retention" onclick="saveMonitor()">ğŸ”” Ø±Ø§Ù‚Ø¨ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ Ù„Ù…Ø¯Ø© Ø£Ø³Ø¨ÙˆØ¹</button>
        </div>
    </div>
</div>

<script>
    // 1. Ù†Ø¸Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø© (Memory System)
    window.onload = () => {
        const savedData = JSON.parse(localStorage.getItem('router_guard_v7'));
        if (savedData) {
            const alert = document.getElementById('memory-alert');
            alert.style.display = "block";
            alert.innerHTML = `âš ï¸ <strong>ØªØ°ÙƒÙŠØ± Ø¨Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:</strong> <br> ${savedData.status}`;
        }
    };

    function diagnose() {
        const q = parseFloat(document.getElementById('quota').value);
        const m = document.getElementById('mobs').value * 1.5; 
        const t = document.getElementById('tvs').value * 4.0;
        const totalDaily = m + t;
        const daysToFinish = Math.floor(q / totalDaily);
        
        const isSuspicious = document.getElementById('c1').checked || document.getElementById('c2').checked;
        const confidence = Math.floor(82 + Math.random() * 15); // Ù†Ø³Ø¨Ø© Ø«Ù‚Ø© Ù†ÙØ³ÙŠØ©

        document.getElementById('verdict').style.display = "block";
        document.getElementById('confidence').innerText = `ğŸ” Ø¯Ù‚Ø© Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${confidence}%`;

        const statusLabel = document.getElementById('statusText');
        const reportLabel = document.getElementById('reportTxt');
        const predictLabel = document.getElementById('prediction');

        // Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
        if (isSuspicious && daysToFinish > 15) {
            statusLabel.innerText = "Ø¨Ø§Ù‚Ø© Ù…Ù€Ù†Ù‡Ù€ÙˆØ¨Ø© Ù…Ø´ÙƒÙˆÙƒ ÙÙŠÙ‡Ø§! ğŸš¨";
            statusLabel.style.color = "var(--danger)";
            reportLabel.innerText = "Ù‡Ù†Ø§Ùƒ ÙØ¬ÙˆØ© Ø¨ÙŠÙ† Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø£Ø¬Ù‡Ø²ØªÙƒ ÙˆÙ…Ø§ ØªØ³Ø¬Ù„Ù‡ Ø§Ù„Ø´Ø±ÙƒØ©. Ø¨Ø§Ù‚ØªÙƒ ØªÙØ³ØªÙ†Ø²Ù ÙÙŠ Ø§Ù„Ø®ÙØ§Ø¡.";
        } else if (daysToFinish < 25) {
            statusLabel.innerText = "Ø¨Ø§Ù‚Ø© Ù…Ø¸Ù„ÙˆÙ…Ø© Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ âš ï¸";
            statusLabel.style.color = "var(--warning)";
            reportLabel.innerText = "Ø­Ø¬Ù… Ø£Ø¬Ù‡Ø²ØªÙƒ Ø£ÙƒØ¨Ø± Ù…Ù† Ø³Ø¹Ø© Ø§Ù„Ø¨Ø§Ù‚Ø©. Ø£Ù†Øª ØªØ¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù€ 140 Ø¬ÙŠØ¬Ø§ Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ø¢Ø¯Ù…ÙŠ.";
        } else {
            statusLabel.innerText = "Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ù…Ø«Ø§Ù„ÙŠ âœ…";
            statusLabel.style.color = "var(--success)";
            reportLabel.innerText = "Ø£Ù†Øª ØªØ¯ÙŠØ± Ù…ÙˆØ§Ø±Ø¯Ùƒ Ø¨Ø°ÙƒØ§Ø¡ØŒ ÙˆÙ…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ø­Ø¨ ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¹Ø§Ø¯Ù„Ø©.";
        }

        // Ù…Ø­Ø±Ùƒ Ø§Ù„ØªÙ†Ø¨Ø¤ (Prediction Engine)
        const deadLineDiff = 30 - daysToFinish;
        if (deadLineDiff > 0) {
            predictLabel.style.display = "block";
            predictLabel.innerText = `ğŸ›‘ ØªÙ†Ø¨Ø¤ Ø§Ù„ØµØ¯Ù…Ø©: Ù„Ùˆ Ø§Ø³ØªÙ…Ø± Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…Ø·ØŒ Ø³ØªÙØµÙ„ Ø§Ù„Ø®Ø¯Ù…Ø© Ù‚Ø¨Ù„ Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ Ø¨Ù€ ${deadLineDiff} Ø£ÙŠØ§Ù….`;
        } else {
            predictLabel.style.display = "none";
        }
    }

    // Ø²Ø± Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© (Retention Logic)
    function saveMonitor() {
        const currentStatus = document.getElementById('statusText').innerText;
        const data = {
            status: currentStatus,
            date: new Date().toLocaleDateString()
        };
        localStorage.setItem('router_guard_v7', JSON.stringify(data));
        
        const btn = document.querySelector('.btn-retention');
        btn.innerText = "âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©";
        btn.style.borderColor = "var(--success)";
        btn.style.color = "var(--success)";
        
        if (window.navigator.vibrate) window.navigator.vibrate([100, 50, 100]);
    }
</script>
</body>
</html>
