<!DOCTYPE html>  <html lang="ar" dir="rtl">    <head>    
  <meta charset="UTF-8" />    
  <title>المهام اليومية | Am Rewards</title>    
  <meta name="viewport" content="width=device-width, initial-scale=1" />    
  <link href="https://fonts.googleapis.com/css2?family=Tajawal&display=swap" rel="stylesheet" />    
  <style>    
    body {    
      font-family: 'Tajawal', sans-serif;    
      background-color: #f2f2f2;    
      margin: 0;    
      padding: 0;    
    }    
    .container {    
      max-width: 600px;    
      margin: 30px auto;    
      background-color: #fff;    
      padding: 20px;    
      border-radius: 12px;    
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);    
    }    
    h1 {    
      color: #4CAF50;    
      text-align: center;    
    }    
    table {    
      width: 100%;    
      border-collapse: collapse;    
      margin-top: 20px;    
    }    
    th, td {    
      border: 1px solid #ddd;    
      text-align: center;    
      padding: 10px;    
    }    
    th {    
      background-color: #4CAF50;    
      color: white;    
    }    
    tr:nth-child(even) {    
      background-color: #f9f9f9;    
    }    
    .btn {    
      background-color: #4CAF50;    
      color: white;    
      padding: 8px 16px;    
      text-align: center;    
      display: inline-block;    
      border-radius: 8px;    
      text-decoration: none;    
    }    
  </style>    
</head>    
<body>    
  <div class="container">    
    <h1>المهام اليومية</h1>    
    <table id="tasksTable">    
      <thead>    
        <tr>    
          <th>المهمة</th>    
          <th>النقاط</th>    
          <th>تنفيذ</th>    
        </tr>    
      </thead>    
      <tbody>    
        <tr><td>الروابط المختصرة</td><td>1.5</td><td><a class="btn" href="shortlinks.html">ابدأ</a></td></tr>    
        <tr><td>عروض CPA</td><td>4</td><td><a class="btn" href="cpa-offers.html">ابدأ</a></td></tr>    
        <tr><td>استطلاعات الرأي</td><td>5</td><td><a class="btn" href="surveys.html">ابدأ</a></td></tr>    
        <tr><td>تجربة أدوات الذكاء الاصطناعي</td><td>4</td><td><a class="btn" href="ai-tools.html">ابدأ</a></td></tr>    
        <tr><td>تثبيت التطبيقات</td><td>6</td><td><a class="btn" href="app-installs.html">ابدأ</a></td></tr>    
        <tr><td>بطاقات عشوائية</td><td>2</td><td><a class="btn" href="cards.html">ابدأ</a></td></tr>    
        <tr><td>مفاجآت سرية</td><td>2</td><td><a class="btn" href="secret-tasks.html">ابدأ</a></td></tr>    
        <!-- 173 مهمة إضافية -->    
      </tbody>    
    </table>    
  </div>    <script type="module">    
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";    
    import {    
      getAuth,    
      onAuthStateChanged    
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";    
    import {    
      getFirestore,    
      doc,    
      getDoc,    
      updateDoc,    
      setDoc,    
      serverTimestamp    
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";    const firebaseConfig = {    
  apiKey: "AIzaSyDbmxUlD5qZ20AFlHQcpgffebHxEBWIBp0",    
  authDomain: "am--rewards.firebaseapp.com",    
  projectId: "am--rewards",    
  storageBucket: "am--rewards.appspot.com",    
  messagingSenderId: "69055907870",    
  appId: "1:69055907870:web:dad77fbb31f302ef347bee"    
};    

const app = initializeApp(firebaseConfig);    
const auth = getAuth(app);    
const db = getFirestore(app);    

const totalRequiredTasks = 180;    
const dailyBonusPoints = 500;    

onAuthStateChanged(auth, async (user) => {    
  if (user) {    
    const userRef = doc(db, "users", user.uid);    
    const userSnap = await getDoc(userRef);    
    const userData = userSnap.data() || {};    

    const tasksCompleted = userData.tasksCompletedToday || 0;    
    const lastBonusDate = userData.lastBonusDate || "";    
    const today = new Date().toISOString().slice(0, 10);    

    // تحقق هل يستحق المكافأة اليوم    
    if (tasksCompleted >= totalRequiredTasks && lastBonusDate !== today) {    
      const newPoints = (userData.points || 0) + dailyBonusPoints;    
      await updateDoc(userRef, {    
        points: newPoints,    
        lastBonusDate: today    
      });    
      alert("🎉 لقد حصلت على مكافأة إتمام المهام اليومية: 500 نقطة!");    
    }    
  }    
});

</script>  </body>

</html>
