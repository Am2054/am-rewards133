<!DOCTYPE html>  <html lang="ar" dir="rtl">    <head>    
  <meta charset="UTF-8" />    
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>    
  <title>Ù…Ù‡Ù…Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø®ØªØµØ±Ø© | Am Rewards</title>    
  <style>    
    body {    
      font-family: 'Tajawal', sans-serif;    
      background-color: #121212;    
      color: #e0e0e0;    
      margin: 0;    
      padding: 20px;    
      text-align: center;    
    }    
    h2 {    
      color: #4caf50;    
      font-size: 28px;    
      margin-bottom: 20px;    
    }    
    .link-box {    
      background: #1e1e1e;    
      padding: 15px;    
      border: 1px solid #333;    
      margin: 12px auto;    
      max-width: 420px;    
      border-radius: 12px;    
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.7);    
      transition: background-color 0.3s;    
    }    
    .link-box:hover {    
      background-color: #2a2a2a;    
    }    
    .link-box p {    
      margin: 8px 0;    
      font-size: 17px;    
    }    
    .link-box button {    
      background-color: #4caf50;    
      color: #121212;    
      border: none;    
      padding: 10px 18px;    
      border-radius: 8px;    
      font-weight: bold;    
      cursor: pointer;    
      font-size: 16px;    
      transition: background-color 0.3s;    
    }    
    .link-box button:hover {    
      background-color: #388e3c;    
    }    
    #user-points {    
      background: #263238;    
      padding: 12px 20px;    
      border-radius: 10px;    
      display: inline-block;    
      margin: 0 auto 20px;    
      font-size: 20px;    
      border: 1px solid #37474f;    
    }    
    #status {    
      font-size: 18px;    
      margin-bottom: 15px;    
      color: #81c784;    
    }    
    .back-buttons {    
      margin-top: 35px;    
    }    
    .back-buttons button {    
      background-color: #4caf50;    
      border: none;    
      color: #121212;    
      padding: 12px 24px;    
      margin: 8px;    
      border-radius: 8px;    
      font-weight: bold;    
      cursor: pointer;    
      font-size: 16px;    
      transition: background-color 0.3s;    
    }    
    .back-buttons button:hover {    
      background-color: #388e3c;    
    }    
    a {    
      text-decoration: none;    
    }    
  </style>    
</head>    
<body>    <h2>Ù…Ù‡Ù…Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø®ØªØµØ±Ø©</h2>    
  <div id="user-points">Ù†Ù‚Ø§Ø·ÙŠ: ...</div>    
  <div id="status">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·...</div>    
  <div id="links-container"></div>    <div class="back-buttons">    
    <a href="dashboard.html"><button>ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button></a>    
    <a href="tasks.html"><button>ğŸ—‚ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</button></a>    
  </div>    <script type="module">    
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";    
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";    
    import { getFirestore, doc, getDoc, updateDoc, increment, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";    const firebaseConfig = {    
  apiKey: "AIzaSyBfOJPkWbmcJ6s29bDNysr-H0Kx-Js3Gy0",    
  authDomain: "am--rewards.firebaseapp.com",    
  projectId: "am--rewards"    
};    

const app = initializeApp(firebaseConfig);    
const auth = getAuth(app);    
const db = getFirestore(app);    

const shortlinks = [
  { title: "Ø±Ø§Ø¨Ø· 1", url: "https://swiftlnx.com/PWNrLoQn" },
  { title: "Ø±Ø§Ø¨Ø· 2", url: "https://swiftlnx.com/9rMjO" },
  { title: "Ø±Ø§Ø¨Ø· 3", url: "https://swiftlnx.com/fqQRRJ8" },
  { title: "Ø±Ø§Ø¨Ø· 4", url: "https://swiftlnx.com/rD8Sy8W" },
  { title: "Ø±Ø§Ø¨Ø· 5", url: "https://swiftlnx.com/yx32Fc5" },
  { title: "Ø±Ø§Ø¨Ø· 6", url: "https://swiftlnx.com/2dOgT" },
  { title: "Ø±Ø§Ø¨Ø· 7", url: "https://swiftlnx.com/hGR6Kjzq" },
  { title: "Ø±Ø§Ø¨Ø· 8", url: "https://swiftlnx.com/fwzo" },
  { title: "Ø±Ø§Ø¨Ø· 9", url: "https://swiftlnx.com/VhTr" },
  { title: "Ø±Ø§Ø¨Ø· 10", url: "https://swiftlnx.com/6Xt2ab2" },
  // Ø±ÙˆØ§Ø¨Ø· 11 Ø¥Ù„Ù‰ 98
  { title: "Ø±Ø§Ø¨Ø· 11", url: "https://swiftlnx.com/iu7HJeB" },
  { title: "Ø±Ø§Ø¨Ø· 12", url: "https://swiftlnx.com/BqEcv0" },
  { title: "Ø±Ø§Ø¨Ø· 13", url: "https://swiftlnx.com/lnXhen4b" },
  { title: "Ø±Ø§Ø¨Ø· 14", url: "https://swiftlnx.com/FjPUNNA" },
  { title: "Ø±Ø§Ø¨Ø· 15", url: "https://swiftlnx.com/nhzkY" },
  { title: "Ø±Ø§Ø¨Ø· 16", url: "https://swiftlnx.com/1LWgI9S" },
  { title: "Ø±Ø§Ø¨Ø· 17", url: "https://swiftlnx.com/ftyer" },
  { title: "Ø±Ø§Ø¨Ø· 18", url: "https://swiftlnx.com/x6OiAh" },
  { title: "Ø±Ø§Ø¨Ø· 19", url: "https://swiftlnx.com/LpwXIULy" },
  { title: "Ø±Ø§Ø¨Ø· 20", url: "https://swiftlnx.com/SNGKz" },
  { title: "Ø±Ø§Ø¨Ø· 21", url: "https://swiftlnx.com/6bfhOz" },
  { title: "Ø±Ø§Ø¨Ø· 22", url: "https://swiftlnx.com/ensA9mgI" },
  { title: "Ø±Ø§Ø¨Ø· 23", url: "https://swiftlnx.com/tGkqKE5u" },
  { title: "Ø±Ø§Ø¨Ø· 24", url: "https://swiftlnx.com/z5fxmB" },
  { title: "Ø±Ø§Ø¨Ø· 25", url: "https://swiftlnx.com/tRl6h" },
  { title: "Ø±Ø§Ø¨Ø· 26", url: "https://swiftlnx.com/DfmA1" },
  { title: "Ø±Ø§Ø¨Ø· 27", url: "https://swiftlnx.com/4Gm4h" },
  { title: "Ø±Ø§Ø¨Ø· 28", url: "https://swiftlnx.com/DMRV" },
  { title: "Ø±Ø§Ø¨Ø· 29", url: "https://swiftlnx.com/KW16" },
  { title: "Ø±Ø§Ø¨Ø· 30", url: "https://swiftlnx.com/iF0fZpoz" },
  { title: "Ø±Ø§Ø¨Ø· 31", url: "https://swiftlnx.com/fs4caC" },
  { title: "Ø±Ø§Ø¨Ø· 32", url: "https://swiftlnx.com/6TrLWkGB" },
  { title: "Ø±Ø§Ø¨Ø· 33", url: "https://swiftlnx.com/KnsWh" },
  { title: "Ø±Ø§Ø¨Ø· 34", url: "https://swiftlnx.com/ued9CQ8" },
  { title: "Ø±Ø§Ø¨Ø· 35", url: "https://swiftlnx.com/LdfQl" },
  { title: "Ø±Ø§Ø¨Ø· 36", url: "https://swiftlnx.com/Pgj7eaJq" },
  { title: "Ø±Ø§Ø¨Ø· 37", url: "https://swiftlnx.com/ae9xsuM" },
  { title: "Ø±Ø§Ø¨Ø· 38", url: "https://swiftlnx.com/xjayCQJ" },
  { title: "Ø±Ø§Ø¨Ø· 39", url: "https://swiftlnx.com/q84XWx" },
  { title: "Ø±Ø§Ø¨Ø· 40", url: "https://swiftlnx.com/0qUq" },
  { title: "Ø±Ø§Ø¨Ø· 41", url: "https://swiftlnx.com/0yBqyIr" },
  { title: "Ø±Ø§Ø¨Ø· 42", url: "https://swiftlnx.com/xFgZCkDa" },
  { title: "Ø±Ø§Ø¨Ø· 43", url: "https://swiftlnx.com/AZU7" },
  { title: "Ø±Ø§Ø¨Ø· 44", url: "https://swiftlnx.com/8ErDqYp" },
  { title: "Ø±Ø§Ø¨Ø· 45", url: "https://swiftlnx.com/miwZdk8j" },
  { title: "Ø±Ø§Ø¨Ø· 46", url: "https://swiftlnx.com/0WpJXf" },
  { title: "Ø±Ø§Ø¨Ø· 47", url: "https://swiftlnx.com/fYUzcz" },
  { title: "Ø±Ø§Ø¨Ø· 48", url: "https://swiftlnx.com/T1VS9m" },
  { title: "Ø±Ø§Ø¨Ø· 49", url: "https://swiftlnx.com/1RnKTF" },
  { title: "Ø±Ø§Ø¨Ø· 50", url: "https://swiftlnx.com/6uK2C" },
  { title: "Ø±Ø§Ø¨Ø· 51", url: "https://swiftlnx.com/Oda6N" },
  { title: "Ø±Ø§Ø¨Ø· 52", url: "https://swiftlnx.com/kIQxCy" },
  { title: "Ø±Ø§Ø¨Ø· 53", url: "https://swiftlnx.com/qMKG" },
  { title: "Ø±Ø§Ø¨Ø· 54", url: "https://swiftlnx.com/0xfu" },
  { title: "Ø±Ø§Ø¨Ø· 55", url: "https://swiftlnx.com/RRB1" },
  { title: "Ø±Ø§Ø¨Ø· 56", url: "https://swiftlnx.com/sZGDIxQ" },
  { title: "Ø±Ø§Ø¨Ø· 57", url: "https://swiftlnx.com/S0tnx9" },
  { title: "Ø±Ø§Ø¨Ø· 58", url: "https://swiftlnx.com/TTjQ" },
  { title: "Ø±Ø§Ø¨Ø· 59", url: "https://swiftlnx.com/jzsV" },
  { title: "Ø±Ø§Ø¨Ø· 60", url: "https://swiftlnx.com/KZUSaIK9" },
  { title: "Ø±Ø§Ø¨Ø· 61", url: "https://swiftlnx.com/6KWQd" },
  { title: "Ø±Ø§Ø¨Ø· 62", url: "https://swiftlnx.com/uYtxWe" },
  { title: "Ø±Ø§Ø¨Ø· 63", url: "https://swiftlnx.com/UbJrW" },
  { title: "Ø±Ø§Ø¨Ø· 64", url: "https://swiftlnx.com/fzbHOZc" },
  { title: "Ø±Ø§Ø¨Ø· 65", url: "https://swiftlnx.com/MhWm" },
  { title: "Ø±Ø§Ø¨Ø· 66", url: "https://swiftlnx.com/aZTtGB" },
  { title: "Ø±Ø§Ø¨Ø· 67", url: "https://swiftlnx.com/8DhT" },
  { title: "Ø±Ø§Ø¨Ø· 68", url: "https://swiftlnx.com/2er08kW" },
  { title: "Ø±Ø§Ø¨Ø· 69", url: "https://swiftlnx.com/R8ZUtKH" },
  { title: "Ø±Ø§Ø¨Ø· 70", url: "https://swiftlnx.com/4Ak4F" },
  { title: "Ø±Ø§Ø¨Ø· 71", url: "https://swiftlnx.com/8V5EA" },
  { title: "Ø±Ø§Ø¨Ø· 72", url: "https://swiftlnx.com/Dss0tgZ3" },
  { title: "Ø±Ø§Ø¨Ø· 73", url: "https://swiftlnx.com/xPAOj" },
  { title: "Ø±Ø§Ø¨Ø· 74", url: "https://swiftlnx.com/yNKqCLu" },
  { title: "Ø±Ø§Ø¨Ø· 75", url: "https://swiftlnx.com/GToWgn" },
  { title: "Ø±Ø§Ø¨Ø· 76", url: "https://swiftlnx.com/409hMi" },
  { title: "Ø±Ø§Ø¨Ø· 77", url: "https://swiftlnx.com/Vjxm" },
  { title: "Ø±Ø§Ø¨Ø· 78", url: "https://swiftlnx.com/nQ9Kr53" },
  { title: "Ø±Ø§Ø¨Ø· 79", url: "https://swiftlnx.com/8i3A2By" },
  { title: "Ø±Ø§Ø¨Ø· 80", url: "https://swiftlnx.com/sWngV" },
  { title: "Ø±Ø§Ø¨Ø· 81", url: "https://swiftlnx.com/CjBs5WOX" },
  { title: "Ø±Ø§Ø¨Ø· 82", url: "https://swiftlnx.com/WBggByN" },
  { title: "Ø±Ø§Ø¨Ø· 83", url: "https://swiftlnx.com/7f1DW" },
  { title: "Ø±Ø§Ø¨Ø· 84", url: "https://swiftlnx.com/W8t92X" },
  { title: "Ø±Ø§Ø¨Ø· 85", url: "https://swiftlnx.com/3gYYW9A" },
  { title: "Ø±Ø§Ø¨Ø· 86", url: "https://swiftlnx.com/POtoXQ5Q" },
  { title: "Ø±Ø§Ø¨Ø· 87", url: "https://swiftlnx.com/f4iMQa8" },
  { title: "Ø±Ø§Ø¨Ø· 88", url: "https://swiftlnx.com/plSpHw" },
  { title: "Ø±Ø§Ø¨Ø· 89", url: "https://swiftlnx.com/KZrr1Ji" },
  { title: "Ø±Ø§Ø¨Ø· 90", url: "https://swiftlnx.com/Xk2ui2" },
  { title: "Ø±Ø§Ø¨Ø· 91", url: "https://swiftlnx.com/qTHC" },
  { title: "Ø±Ø§Ø¨Ø· 92", url: "https://swiftlnx.com/kgvZbiv1" },
  { title: "Ø±Ø§Ø¨Ø· 93", url: "https://swiftlnx.com/oqH3s" },
  { title: "Ø±Ø§Ø¨Ø· 94", url: "https://swiftlnx.com/OSN3ws" },
  { title: "Ø±Ø§Ø¨Ø· 95", url: "https://swiftlnx.com/z3MQK" },
  { title: "Ø±Ø§Ø¨Ø· 96", url: "https://swiftlnx.com/x0M6ty" },
  { title: "Ø±Ø§Ø¨Ø· 97", url: "https://swiftlnx.com/Ykx9auvd" },
  { title: "Ø±Ø§Ø¨Ø· 98", url: "https://swiftlnx.com/VJyl" }
];
onAuthStateChanged(auth, user => {    
  if (user) {    
    const userId = user.uid;    
    initShortLinks(userId);    
  } else {    
    alert("âš ï¸ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.");    
    window.location.href = "index.html";    
  }    
});    

function initShortLinks(userId) {    
  const today = new Date().toISOString().slice(0, 10);    
  const userProgressKey = `shortlinks_progress_${userId}_${today}`;    
  let completedLinks = [];    
  try {    
    const stored = JSON.parse(localStorage.getItem(userProgressKey));    
    if (Array.isArray(stored)) completedLinks = stored;    
  } catch (e) {    
    completedLinks = [];    
  }    

  const justCompleted = localStorage.getItem("justCompletedLink");    
  if (justCompleted !== null) {    
    const completedIndex = parseInt(justCompleted);    
    if (!completedLinks.includes(completedIndex)) {    
      completedLinks.push(completedIndex);    
      localStorage.setItem(userProgressKey, JSON.stringify(completedLinks));    
      localStorage.removeItem("justCompletedLink");    

      const userDocRef = doc(db, "users", userId);    
      updateDoc(userDocRef, {    
        points: increment(1.5)    
      }).then(updateUserPoints);    

      const logRef = collection(db, "adminTaskLogs");    
      addDoc(logRef, {    
        userId,    
        taskType: "shortlink",    
        rewardToUser: 3.5,    
        profitToAdmin: 0.14, // ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ù†Ø§    
        date: new Date()    
      });    

    } else {    
      localStorage.removeItem("justCompletedLink");    
      updateUserPoints();    
    }    
  }    

  function updateUserPoints() {    
    const userDocRef = doc(db, "users", userId);    
    getDoc(userDocRef).then(docSnap => {    
      const data = docSnap.data();    
      const points = data?.points || 0;    
      document.getElementById("user-points").textContent = `Ù†Ù‚Ø§Ø·ÙŠ: ${points.toFixed(1)} ğŸª™`;    
    });    
  }    

  const container = document.getElementById("links-container");    
  const status = document.getElementById("status");    

  const availableLinks = shortlinks.filter((_, i) => !completedLinks.includes(i));    
  status.textContent = `Ø±ÙˆØ§Ø¨Ø· Ù…ÙƒØªÙ…Ù„Ø©: ${completedLinks.length} / ${shortlinks.length}`;    

  if (availableLinks.length === 0) {    
    container.innerHTML = "<p style='text-align:center;'>âœ… Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø®ØªØµØ±Ø© Ø§Ù„ÙŠÙˆÙ…!</p>";    
    return;    
  }    

  availableLinks.forEach((item, index) => {    
    const globalIndex = shortlinks.indexOf(item);    
    const div = document.createElement("div");    
    div.className = "link-box";    
    div.innerHTML = `    
      <p>${item.title}</p>    
      <p>ğŸª™ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø© ØªÙ…Ù†Ø­Ùƒ <strong>3</strong> Ù†Ù‚Ø·Ø©</p>    
      <button onclick="startRedirect(${globalIndex}, '${item.url}')">Ø§ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·</button>    
    `;    
    container.appendChild(div);    
  });    

  updateUserPoints();    
}    

window.startRedirect = function(index, url) {    
  localStorage.setItem("redirect_link", url);    
  localStorage.setItem("redirect_index", index);    
  window.location.href = "redirect.html";    
}

</script>  </body>

</html>
