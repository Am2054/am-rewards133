<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <title>Ù…Ù‡Ù…Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø®ØªØµØ±Ø© | Am Rewards</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://fonts.googleapis.com/css2?family=Tajawal&display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: "Tajawal", sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 600px;
        margin: 40px auto;
        background-color: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        text-align: center;
      }
      h2 {
        color: #4caf50;
      }
      .link-box {
        background-color: #e8f5e9;
        padding: 15px;
        margin: 15px 0;
        border-radius: 10px;
        border: 1px solid #c8e6c9;
      }
      .link-box a {
        display: inline-block;
        margin-top: 10px;
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        text-decoration: none;
        border-radius: 5px;
      }
    </style>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import {
        getFirestore,
        doc,
        updateDoc,
        arrayUnion,
        increment,
        getDoc,
      } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
      import {
        getAuth,
        onAuthStateChanged,
      } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCY-Q9K1GzS8lvWb9ITmpj6bbPfQZHKefk",
        authDomain: "am--rewards.firebaseapp.com",
        projectId: "am--rewards",
        storageBucket: "am--rewards.appspot.com",
        messagingSenderId: "51585715948",
        appId: "1:51585715948:web:9f5918fe3b68b2b453fb7e",
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      const auth = getAuth(app);

      const shortlinks = [
        { title: "Ø±Ø§Ø¨Ø· 1", url: "https://exe.io/GXmF3F" },
        { title: "Ø±Ø§Ø¨Ø· 2", url: "https://exe.io/NYY4L" },
        { title: "Ø±Ø§Ø¨Ø· 3", url: "https://exe.io/sA8yK" },
        { title: "Ø±Ø§Ø¨Ø· 4", url: "https://exe.io/b6pud9" },
        { title: "Ø±Ø§Ø¨Ø· 5", url: "https://exe.io/mLfYLv" },
        { title: "Ø±Ø§Ø¨Ø· 6", url: "https://exe.io/hjvvR" },
        { title: "Ø±Ø§Ø¨Ø· 7", url: "https://exe.io/roaaW" },
        { title: "Ø±Ø§Ø¨Ø· 8", url: "https://exe.io/EZzmEMe" },
        { title: "Ø±Ø§Ø¨Ø· 9", url: "https://exe.io/GZNmGk" },
        { title: "Ø±Ø§Ø¨Ø· 10", url: "https://exe.io/YO2Y1g" },
        { title: "Ø±Ø§Ø¨Ø· 11", url: "https://exe.io/Bqv9r7W" },
        { title: "Ø±Ø§Ø¨Ø· 12", url: "https://exe.io/8cD2i" },
        { title: "Ø±Ø§Ø¨Ø· 13", url: "https://exe.io/MYAHf" },
        { title: "Ø±Ø§Ø¨Ø· 14", url: "https://exe.io/gKRUGh" },
        { title: "Ø±Ø§Ø¨Ø· 15", url: "https://exe.io/y6TT8h" },
        { title: "Ø±Ø§Ø¨Ø· 16", url: "https://exe.io/BlY6H" },
        { title: "Ø±Ø§Ø¨Ø· 17", url: "https://exe.io/3Q84s" },
        { title: "Ø±Ø§Ø¨Ø· 18", url: "https://exe.io/MR1V6F" },
        { title: "Ø±Ø§Ø¨Ø· 19", url: "https://exe.io/j7ndBi" },
        { title: "Ø±Ø§Ø¨Ø· 20", url: "https://exe.io/yE9u3p6" },
        { title: "Ø±Ø§Ø¨Ø· 21", url: "https://exe.io/HYoA4" },
        { title: "Ø±Ø§Ø¨Ø· 22", url: "https://exe.io/tCWi5kM" },
        { title: "Ø±Ø§Ø¨Ø· 23", url: "https://exe.io/mDnXvUO" },
        { title: "Ø±Ø§Ø¨Ø· 24", url: "https://exe.io/BsbJTWx" },
        { title: "Ø±Ø§Ø¨Ø· 25", url: "https://exe.io/PRg3TQ" },
        { title: "Ø±Ø§Ø¨Ø· 26", url: "https://exe.io/VQVEgE" },
        { title: "Ø±Ø§Ø¨Ø· 27", url: "https://exe.io/Wfx6p9" },
        { title: "Ø±Ø§Ø¨Ø· 28", url: "https://exe.io/NBEFt" },
        { title: "Ø±Ø§Ø¨Ø· 29", url: "https://exe.io/4w2GV" },
        { title: "Ø±Ø§Ø¨Ø· 30", url: "https://exe.io/MHeoYh" },
        { title: "Ø±Ø§Ø¨Ø· 31", url: "https://exe.io/GwTAKa" },
        { title: "Ø±Ø§Ø¨Ø· 32", url: "https://exe.io/HHkU2" },
        { title: "Ø±Ø§Ø¨Ø· 33", url: "https://exe.io/OAzEP" },
        { title: "Ø±Ø§Ø¨Ø· 34", url: "https://exe.io/m0sTj" },
        { title: "Ø±Ø§Ø¨Ø· 35", url: "https://exe.io/6MbtTA" },
        { title: "Ø±Ø§Ø¨Ø· 36", url: "https://exe.io/w0U4V" },
        { title: "Ø±Ø§Ø¨Ø· 37", url: "https://exe.io/ek8TD" },
        { title: "Ø±Ø§Ø¨Ø· 38", url: "https://exe.io/8yboQOu" },
      ];

      onAuthStateChanged(auth, async (user) => {
        if (user) {
          const userRef = doc(db, "users", user.uid);
          const userSnap = await getDoc(userRef);
          const completedTasks = userSnap.exists()
            ? userSnap.data().completedTasks || []
            : [];

          const container = document.querySelector(".container");

          shortlinks.forEach((link) => {
            if (!completedTasks.includes(link.title)) {
              const box = document.createElement("div");
              box.className = "link-box";
              box.innerHTML = `
                <h3>${link.title}</h3>
                <p>ğŸª™ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø© ØªÙ…Ù†Ø­Ùƒ <strong>1.5</strong> Ù†Ù‚Ø·Ø©</p>
                <a href="${link.url}" target="_blank">ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·</a>
              `;
              box.querySelector("a").addEventListener("click", async () => {
                await updateDoc(userRef, {
                  points: increment(1.5),
                  completedTasks: arrayUnion(link.title),
                  taskHistory: arrayUnion({
                    task: link.title,
                    type: "shortlink",
                    timestamp: new Date(),
                    rewardToUser: 1.5,
                  }),
                });
              });
              container.appendChild(box);
            }
          });
        } else {
          window.location.href = "/login.html";
        }
      });
    </script>
  </head>
  <body>
    <div class="container">
      <h2>Ù…Ù‡Ù…Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø®ØªØµØ±Ø©</h2>
      <p>Ù‚Ù… Ø¨ÙØªØ­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆÙƒØ³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·</p>
    </div>
  </body>
</html>
