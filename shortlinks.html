<!DOCTYPE html>  <html lang="ar" dir="rtl">    <head>    
  <meta charset="UTF-8" />    
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>    
  <title>┘Ё┘Є┘ЁпЕ пД┘ёп▒┘ѕпДпепи пД┘ё┘Ёп«пфпхп▒пЕ | Am Rewards</title>    
  <style>    
    body {    
      font-family: 'Tajawal', sans-serif;    
      background-color: #121212;    
      color: #e0e0e0;    
      margin: 0;    
      padding: 20px;    
      text-align: center;    
    }    
    h2 {    
      color: #4caf50;    
      font-size: 28px;    
      margin-bottom: 20px;    
    }    
    .link-box {    
      background: #1e1e1e;    
      padding: 15px;    
      border: 1px solid #333;    
      margin: 12px auto;    
      max-width: 420px;    
      border-radius: 12px;    
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.7);    
      transition: background-color 0.3s;    
    }    
    .link-box:hover {    
      background-color: #2a2a2a;    
    }    
    .link-box p {    
      margin: 8px 0;    
      font-size: 17px;    
    }    
    .link-box button {    
      background-color: #4caf50;    
      color: #121212;    
      border: none;    
      padding: 10px 18px;    
      border-radius: 8px;    
      font-weight: bold;    
      cursor: pointer;    
      font-size: 16px;    
      transition: background-color 0.3s;    
    }    
    .link-box button:hover {    
      background-color: #388e3c;    
    }    
    #user-points {    
      background: #263238;    
      padding: 12px 20px;    
      border-radius: 10px;    
      display: inline-block;    
      margin: 0 auto 20px;    
      font-size: 20px;    
      border: 1px solid #37474f;    
    }    
    #status {    
      font-size: 18px;    
      margin-bottom: 15px;    
      color: #81c784;    
    }    
    .back-buttons {    
      margin-top: 35px;    
    }    
    .back-buttons button {    
      background-color: #4caf50;    
      border: none;    
      color: #121212;    
      padding: 12px 24px;    
      margin: 8px;    
      border-radius: 8px;    
      font-weight: bold;    
      cursor: pointer;    
      font-size: 16px;    
      transition: background-color 0.3s;    
    }    
    .back-buttons button:hover {    
      background-color: #388e3c;    
    }    
    a {    
      text-decoration: none;    
    }    
  </style>    
</head>    
<body>    <h2>┘Ё┘Є┘ЁпЕ пД┘ёп▒┘ѕпДпепи пД┘ё┘Ёп«пфпхп▒пЕ</h2>    
  <div id="user-points">┘є┘ѓпДпи┘і: ...</div>    
  <div id="status">пгпДп▒┘і пфпГ┘Ё┘і┘ё пД┘ёп▒┘ѕпДпепи...</div>    
  <div id="links-container"></div>    <div class="back-buttons">    
    <a href="dashboard.html"><button>­ЪћЎ пД┘ёп╣┘ѕп»пЕ пЦ┘ё┘Ѕ пД┘ёпх┘ЂпГпЕ пД┘ёп▒пд┘іп│┘іпЕ</button></a>    
    <a href="tasks.html"><button>­ЪЌѓ№ИЈ пД┘ёп╣┘ѕп»пЕ пЦ┘ё┘Ѕ пх┘ЂпГпЕ пД┘ё┘Ё┘ЄпД┘Ё</button></a>    
  </div>    <script type="module">    
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";    
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";    
    import { getFirestore, doc, getDoc, updateDoc, increment, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";    const firebaseConfig = {    
  apiKey: "AIzaSyBfOJPkWbmcJ6s29bDNysr-H0Kx-Js3Gy0",    
  authDomain: "am--rewards.firebaseapp.com",    
  projectId: "am--rewards"    
};    

const app = initializeApp(firebaseConfig);    
const auth = getAuth(app);    
const db = getFirestore(app);    

const shortlinks = [
  { title: "п▒пДпепи 1", url: "https://swiftlnx.com/PWNrLoQn" },
  { title: "п▒пДпепи 2", url: "https://swiftlnx.com/9rMjO" },
  { title: "п▒пДпепи 3", url: "https://swiftlnx.com/fqQRRJ8" },
  { title: "п▒пДпепи 4", url: "https://swiftlnx.com/rD8Sy8W" },
  { title: "п▒пДпепи 5", url: "https://swiftlnx.com/yx32Fc5" },
  { title: "п▒пДпепи 6", url: "https://swiftlnx.com/2dOgT" },
  { title: "п▒пДпепи 7", url: "https://swiftlnx.com/hGR6Kjzq" },
  { title: "п▒пДпепи 8", url: "https://swiftlnx.com/fwzo" },
  { title: "п▒пДпепи 9", url: "https://swiftlnx.com/VhTr" },
  { title: "п▒пДпепи 10", url: "https://swiftlnx.com/6Xt2ab2" },
  // п▒┘ѕпДпепи 11 пЦ┘ё┘Ѕ 98
  { title: "п▒пДпепи 11", url: "https://swiftlnx.com/iu7HJeB" },
  { title: "п▒пДпепи 12", url: "https://swiftlnx.com/BqEcv0" },
  { title: "п▒пДпепи 13", url: "https://swiftlnx.com/lnXhen4b" },
  { title: "п▒пДпепи 14", url: "https://swiftlnx.com/FjPUNNA" },
  { title: "п▒пДпепи 15", url: "https://swiftlnx.com/nhzkY" },
  { title: "п▒пДпепи 16", url: "https://swiftlnx.com/1LWgI9S" },
  { title: "п▒пДпепи 17", url: "https://swiftlnx.com/ftyer" },
  { title: "п▒пДпепи 18", url: "https://swiftlnx.com/x6OiAh" },
  { title: "п▒пДпепи 19", url: "https://swiftlnx.com/LpwXIULy" },
  { title: "п▒пДпепи 20", url: "https://swiftlnx.com/SNGKz" },
  { title: "п▒пДпепи 21", url: "https://swiftlnx.com/6bfhOz" },
  { title: "п▒пДпепи 22", url: "https://swiftlnx.com/ensA9mgI" },
  { title: "п▒пДпепи 23", url: "https://swiftlnx.com/tGkqKE5u" },
  { title: "п▒пДпепи 24", url: "https://swiftlnx.com/z5fxmB" },
  { title: "п▒пДпепи 25", url: "https://swiftlnx.com/tRl6h" },
  { title: "п▒пДпепи 26", url: "https://swiftlnx.com/DfmA1" },
  { title: "п▒пДпепи 27", url: "https://swiftlnx.com/4Gm4h" },
  { title: "п▒пДпепи 28", url: "https://swiftlnx.com/DMRV" },
  { title: "п▒пДпепи 29", url: "https://swiftlnx.com/KW16" },
  { title: "п▒пДпепи 30", url: "https://swiftlnx.com/iF0fZpoz" },
  { title: "п▒пДпепи 31", url: "https://swiftlnx.com/fs4caC" },
  { title: "п▒пДпепи 32", url: "https://swiftlnx.com/6TrLWkGB" },
  { title: "п▒пДпепи 33", url: "https://swiftlnx.com/KnsWh" },
  { title: "п▒пДпепи 34", url: "https://swiftlnx.com/ued9CQ8" },
  { title: "п▒пДпепи 35", url: "https://swiftlnx.com/LdfQl" },
  { title: "п▒пДпепи 36", url: "https://swiftlnx.com/Pgj7eaJq" },
  { title: "п▒пДпепи 37", url: "https://swiftlnx.com/ae9xsuM" },
  { title: "п▒пДпепи 38", url: "https://swiftlnx.com/xjayCQJ" },
  { title: "п▒пДпепи 39", url: "https://swiftlnx.com/q84XWx" },
  { title: "п▒пДпепи 40", url: "https://swiftlnx.com/0qUq" },
  { title: "п▒пДпепи 41", url: "https://swiftlnx.com/0yBqyIr" },
  { title: "п▒пДпепи 42", url: "https://swiftlnx.com/xFgZCkDa" },
  { title: "п▒пДпепи 43", url: "https://swiftlnx.com/AZU7" },
  { title: "п▒пДпепи 44", url: "https://swiftlnx.com/8ErDqYp" },
  { title: "п▒пДпепи 45", url: "https://swiftlnx.com/miwZdk8j" },
  { title: "п▒пДпепи 46", url: "https://swiftlnx.com/0WpJXf" },
  { title: "п▒пДпепи 47", url: "https://swiftlnx.com/fYUzcz" },
  { title: "п▒пДпепи 48", url: "https://swiftlnx.com/T1VS9m" },
  { title: "п▒пДпепи 49", url: "https://swiftlnx.com/1RnKTF" },
  { title: "п▒пДпепи 50", url: "https://swiftlnx.com/6uK2C" },
  { title: "п▒пДпепи 51", url: "https://swiftlnx.com/Oda6N" },
  { title: "п▒пДпепи 52", url: "https://swiftlnx.com/kIQxCy" },
  { title: "п▒пДпепи 53", url: "https://swiftlnx.com/qMKG" },
  { title: "п▒пДпепи 54", url: "https://swiftlnx.com/0xfu" },
  { title: "п▒пДпепи 55", url: "https://swiftlnx.com/RRB1" },
  { title: "п▒пДпепи 56", url: "https://swiftlnx.com/sZGDIxQ" },
  { title: "п▒пДпепи 57", url: "https://swiftlnx.com/S0tnx9" },
  { title: "п▒пДпепи 58", url: "https://swiftlnx.com/TTjQ" },
  { title: "п▒пДпепи 59", url: "https://swiftlnx.com/jzsV" },
  { title: "п▒пДпепи 60", url: "https://swiftlnx.com/KZUSaIK9" },
  { title: "п▒пДпепи 61", url: "https://swiftlnx.com/6KWQd" },
  { title: "п▒пДпепи 62", url: "https://swiftlnx.com/uYtxWe" },
  { title: "п▒пДпепи 63", url: "https://swiftlnx.com/UbJrW" },
  { title: "п▒пДпепи 64", url: "https://swiftlnx.com/fzbHOZc" },
  { title: "п▒пДпепи 65", url: "https://swiftlnx.com/MhWm" },
  { title: "п▒пДпепи 66", url: "https://swiftlnx.com/aZTtGB" },
  { title: "п▒пДпепи 67", url: "https://swiftlnx.com/8DhT" },
  { title: "п▒пДпепи 68", url: "https://swiftlnx.com/2er08kW" },
  { title: "п▒пДпепи 69", url: "https://swiftlnx.com/R8ZUtKH" },
  { title: "п▒пДпепи 70", url: "https://swiftlnx.com/4Ak4F" },
  { title: "п▒пДпепи 71", url: "https://swiftlnx.com/8V5EA" },
  { title: "п▒пДпепи 72", url: "https://swiftlnx.com/Dss0tgZ3" },
  { title: "п▒пДпепи 73", url: "https://swiftlnx.com/xPAOj" },
  { title: "п▒пДпепи 74", url: "https://swiftlnx.com/yNKqCLu" },
  { title: "п▒пДпепи 75", url: "https://swiftlnx.com/GToWgn" },
  { title: "п▒пДпепи 76", url: "https://swiftlnx.com/409hMi" },
  { title: "п▒пДпепи 77", url: "https://swiftlnx.com/Vjxm" },
  { title: "п▒пДпепи 78", url: "https://swiftlnx.com/nQ9Kr53" },
  { title: "п▒пДпепи 79", url: "https://swiftlnx.com/8i3A2By" },
  { title: "п▒пДпепи 80", url: "https://swiftlnx.com/sWngV" },
  { title: "п▒пДпепи 81", url: "https://swiftlnx.com/CjBs5WOX" },
  { title: "п▒пДпепи 82", url: "https://swiftlnx.com/WBggByN" },
  { title: "п▒пДпепи 83", url: "https://swiftlnx.com/7f1DW" },
  { title: "п▒пДпепи 84", url: "https://swiftlnx.com/W8t92X" },
  { title: "п▒пДпепи 85", url: "https://swiftlnx.com/3gYYW9A" },
  { title: "п▒пДпепи 86", url: "https://swiftlnx.com/POtoXQ5Q" },
  { title: "п▒пДпепи 87", url: "https://swiftlnx.com/f4iMQa8" },
  { title: "п▒пДпепи 88", url: "https://swiftlnx.com/plSpHw" },
  { title: "п▒пДпепи 89", url: "https://swiftlnx.com/KZrr1Ji" },
  { title: "п▒пДпепи 90", url: "https://swiftlnx.com/Xk2ui2" },
  { title: "п▒пДпепи 91", url: "https://swiftlnx.com/qTHC" },
  { title: "п▒пДпепи 92", url: "https://swiftlnx.com/kgvZbiv1" },
  { title: "п▒пДпепи 93", url: "https://swiftlnx.com/oqH3s" },
  { title: "п▒пДпепи 94", url: "https://swiftlnx.com/OSN3ws" },
  { title: "п▒пДпепи 95", url: "https://swiftlnx.com/z3MQK" },
  { title: "п▒пДпепи 96", url: "https://swiftlnx.com/x0M6ty" },
  { title: "п▒пДпепи 97", url: "https://swiftlnx.com/Ykx9auvd" },
  { title: "п▒пДпепи 98", url: "https://swiftlnx.com/VJyl" }
];
onAuthStateChanged(auth, user => {    
  if (user) {    
    const userId = user.uid;    
    initShortLinks(userId);    
  } else {    
    alert("Рџа№ИЈ ┘іпгпе пфп│пг┘і┘ё пД┘ёп»п«┘ѕ┘ё пБ┘ѕ┘ёпД┘І.");    
    window.location.href = "index.html";    
  }    
});    

function initShortLinks(userId) {    
  const today = new Date().toISOString().slice(0, 10);    
  const userProgressKey = `shortlinks_progress_${userId}_${today}`;    
  let completedLinks = [];    
  try {    
    const stored = JSON.parse(localStorage.getItem(userProgressKey));    
    if (Array.isArray(stored)) completedLinks = stored;    
  } catch (e) {    
    completedLinks = [];    
  }    

  const justCompleted = localStorage.getItem("justCompletedLink");    
  if (justCompleted !== null) {    
    const completedIndex = parseInt(justCompleted);    
    if (!completedLinks.includes(completedIndex)) {    
      completedLinks.push(completedIndex);    
      localStorage.setItem(userProgressKey, JSON.stringify(completedLinks));    
      localStorage.removeItem("justCompletedLink");    

      const userDocRef = doc(db, "users", userId);    
      updateDoc(userDocRef, {    
        points: increment(1.5)    
      }).then(updateUserPoints);    

      const logRef = collection(db, "adminTaskLogs");    
      addDoc(logRef, {    
        userId,    
        taskType: "shortlink",    
        rewardToUser: 3.5,    
        profitToAdmin: 0.14, // ┘і┘Ё┘Ѓ┘є┘Ѓ пфп╣п»┘і┘ё пД┘ёп▒пепГ пД┘ёп«пДпх пе┘Ѓ ┘Є┘єпД    
        date: new Date()    
      });    

    } else {    
      localStorage.removeItem("justCompletedLink");    
      updateUserPoints();    
    }    
  }    

  function updateUserPoints() {    
    const userDocRef = doc(db, "users", userId);    
    getDoc(userDocRef).then(docSnap => {    
      const data = docSnap.data();    
      const points = data?.points || 0;    
      document.getElementById("user-points").textContent = `┘є┘ѓпДпи┘і: ${points.toFixed(1)} ­ЪфЎ`;    
    });    
  }    

  const container = document.getElementById("links-container");    
  const status = document.getElementById("status");    

  const availableLinks = shortlinks.filter((_, i) => !completedLinks.includes(i));    
  status.textContent = `п▒┘ѕпДпепи ┘Ё┘Ѓпф┘Ё┘ёпЕ: ${completedLinks.length} / ${shortlinks.length}`;    

  if (availableLinks.length === 0) {    
    container.innerHTML = "<p style='text-align:center;'>РюЁ ┘ё┘ѓп» пБ┘Ѓ┘Ё┘ёпф пг┘Ё┘іп╣ пД┘ёп▒┘ѕпДпепи пД┘ё┘Ёп«пфпхп▒пЕ пД┘ё┘і┘ѕ┘Ё!</p>";    
    return;    
  }    

  availableLinks.forEach((item, index) => {    
    const globalIndex = shortlinks.indexOf(item);    
    const div = document.createElement("div");    
    div.className = "link-box";    
    div.innerHTML = `    
      <p>${item.title}</p>    
      <p>­ЪфЎ ┘Єп░┘Є пД┘ё┘Ё┘Є┘ЁпЕ пф┘Ё┘єпГ┘Ѓ <strong>3</strong> ┘є┘ѓпипЕ</p>    
      <button onclick="startRedirect(${globalIndex}, '${item.url}')">пД┘ЂпфпГ пД┘ёп▒пДпепи</button>    
    `;    
    container.appendChild(div);    
  });    

  updateUserPoints();    
}    

window.startRedirect = function(index, url) {    
  localStorage.setItem("redirect_link", url);    
  localStorage.setItem("redirect_index", index);    
  window.location.href = "redirect.html";    
}

</script>  </body>

</html>
