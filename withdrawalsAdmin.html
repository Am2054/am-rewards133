<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AM REWARDS | EXECUTIVE PANEL</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #030712; 
      --card-bg: rgba(17, 24, 39, 0.8);
      --gold: #f5c542; 
      --accent: #00fa9a;
      --red: #ff4757;
      --row-bg: rgba(255, 255, 255, 0.03);
    }

    body {
      font-family: "Cairo", sans-serif;
      background: var(--bg); color: #fff; margin: 0; padding: 20px;
      background-image: radial-gradient(circle at top right, #1e293b, #030712);
      min-height: 100vh;
    }

    .wrap { max-width: 1400px; margin: 0 auto; }

    /* --- ØªØ­Ø³ÙŠÙ† ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙˆÙ„ (Modern Executive Table) --- */
    .table-section {
      background: var(--card-bg);
      border-radius: 30px;
      padding: 30px;
      border: 1px solid rgba(245, 197, 66, 0.1);
      backdrop-filter: blur(20px);
    }

    .modern-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 12px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„ØµÙÙˆÙ Ù„Ø¬Ø¹Ù„Ù‡Ø§ ØªØ¨Ø¯Ùˆ ÙƒØ¨Ø·Ø§Ù‚Ø§Øª */
    }

    .modern-table thead th {
      padding: 15px;
      color: #64748b;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      border: none;
      text-align: right;
    }

    .modern-table tbody tr {
      background: var(--row-bg);
      transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .modern-table tbody tr:hover {
      background: rgba(245, 197, 66, 0.08);
      transform: scale(1.005);
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }

    .modern-table td {
      padding: 20px 15px;
      border: none;
    }

    /* Ø²ÙˆØ§ÙŠØ§ Ù…Ù†Ø­Ù†ÙŠØ© Ù„Ø£Ø·Ø±Ø§Ù Ø§Ù„ØµÙÙˆÙ ÙÙ‚Ø· */
    .modern-table td:first-child { border-radius: 0 15px 15px 0; }
    .modern-table td:last-child { border-radius: 15px 0 0 15px; }

    /* ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø£ÙØ§ØªØ§Ø±) */
    .user-info { display: flex; align-items: center; gap: 12px; }
    .avatar {
      width: 40px; height: 40px; border-radius: 12px;
      background: linear-gradient(135deg, var(--gold), #b8860b);
      color: #000; display: flex; align-items: center; justify-content: center;
      font-weight: 900; font-family: 'Orbitron';
    }

    .uid-tag {
      font-size: 0.7rem; color: #64748b; display: block;
      margin-top: 4px; font-family: monospace;
    }

    /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø¨Ø§Ù„Øº ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Øª */
    .amount-box {
      font-family: 'Orbitron', sans-serif;
      font-size: 1rem; color: var(--gold);
    }

    /* Ø§Ù„ÙƒØ¨Ø³ÙˆÙ„Ø§Øª (Pills) */
    .pill {
      padding: 6px 14px; border-radius: 10px; font-size: 0.75rem;
      font-weight: 700; display: inline-block;
      text-transform: uppercase;
    }
    .pill-pending { background: rgba(249, 115, 22, 0.1); color: #f97316; border: 1px solid rgba(249, 115, 22, 0.2); }
    .pill-completed { background: rgba(0, 250, 154, 0.1); color: var(--accent); border: 1px solid rgba(0, 250, 154, 0.2); }
    .pill-rejected { background: rgba(255, 71, 87, 0.1); color: var(--red); border: 1px solid rgba(255, 71, 87, 0.2); }

    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
    .action-btn {
      background: rgba(255,255,255,0.05); color: #fff; border: 1px solid rgba(255,255,255,0.1);
      padding: 8px 18px; border-radius: 12px; cursor: pointer; transition: 0.2s;
      font-weight: 700; font-size: 0.8rem;
    }
    .action-btn:hover { background: var(--gold); color: #000; border-color: var(--gold); }

    /* Ø§Ù„ÙÙ„Ø§ØªØ± */
    .filters-box {
      display: flex; gap: 20px; margin-bottom: 25px; align-items: center;
    }
    .search-input {
      flex: 1; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,215,0,0.1);
      padding: 15px 25px; border-radius: 15px; color: #fff; outline: none;
    }
    .search-input:focus { border-color: var(--gold); }

  </style>
</head>
<body>

<div class="wrap">
  <div class="filters-box">
      <input type="text" id="searchInput" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ù…Ø­ÙØ¸Ø©ØŒ Ø£Ùˆ UID...">
      <select id="statusFilter" class="search-input" style="max-width: 200px;">
          <option value="All">ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</option>
          <option value="pending">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</option>
          <option value="completed">Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</option>
          <option value="rejected">Ø§Ù„Ù…Ø±ÙÙˆØ¶Ø©</option>
      </select>
  </div>

  <div class="table-section">
    <table class="modern-table">
      <thead>
        <tr>
          <th>Ø§Ù„Ù…Ø³ØªÙÙŠØ¯</th>
          <th>Ø§Ù„Ù†Ù‚Ø§Ø· â­</th>
          <th>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ØµØ§ÙÙŠ ğŸ’°</th>
          <th>Ø±Ù‚Ù… Ø§Ù„Ù…Ø­ÙØ¸Ø©</th>
          <th>Ø§Ù„ØªØ§Ø±ÙŠØ® ğŸ“…</th>
          <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody id="withdrawalsTbody">
        </tbody>
    </table>
  </div>
</div>

<script>
    // ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© Ø§Ù„Ù€ renderTable Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯
    function renderTable(list) {
      const tbody = document.getElementById('withdrawalsTbody');
      tbody.innerHTML = '';
      
      list.forEach(w => {
        const tr = document.createElement('tr');
        
        // Ø¬Ù„Ø¨ Ø£ÙˆÙ„ Ø­Ø±Ù Ù„Ù„Ø§Ø³Ù… Ù„Ù„Ø£ÙØ§ØªØ§Ø±
        const userName = usersMap[w.userId] || 'M';
        const firstLetter = userName.charAt(0).toUpperCase();
        
        const statusClass = w.status === 'pending' ? 'pill-pending' : (w.status === 'completed' ? 'pill-completed' : 'pill-rejected');
        const statusText = w.status === 'pending' ? 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±' : (w.status === 'completed' ? 'ØªÙ… Ø§Ù„Ø¯ÙØ¹' : 'Ù…Ø±ÙÙˆØ¶');

        tr.innerHTML = `
          <td>
            <div class="user-info">
              <div class="avatar">${firstLetter}</div>
              <div>
                <span style="font-weight: 700; display: block;">${userName}</span>
                <span class="uid-tag">${w.userId}</span>
              </div>
            </div>
          </td>
          <td class="amount-box" style="color: #94a3b8;">${Number(w.pts).toLocaleString()}</td>
          <td class="amount-box">${Number(w.net).toFixed(2)} <span style="font-size: 0.7rem;">EGP</span></td>
          <td>
            <div style="background: rgba(0,0,0,0.2); padding: 5px 10px; border-radius: 8px; display: inline-block; font-family: monospace;">
              ${w.wallet}
            </div>
            <div style="font-size: 0.6rem; color: #64748b; margin-top: 5px;">${w.method}</div>
          </td>
          <td style="font-size: 0.8rem; color: #94a3b8;">
            ${new Date(w.date.seconds * 1000).toLocaleDateString('ar-EG')}
          </td>
          <td>
            <span class="pill ${statusClass}">${statusText}</span>
          </td>
          <td>
            <button class="action-btn" onclick="openReviewModal('${w.id}')">Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„ØªØ¯Ù‚ÙŠÙ‚</button>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }
</script>

</body>
</html>
